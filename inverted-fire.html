<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE-edge">
        <meta name="viewport" content="width=device-width", initial-scale="1.0">
        <title>Inverted Fire Cuddles - Cuddlesmith</title>
        <link rel = "stylesheet" href="style.css">
        <script src="https://kit.fontawesome.com/18933f7f73.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id = 'header'>
            <nav class="site-nav">
                <div class="nav-container">
                    <div class="nav-logo-section">
                        <a class="nav-logo" href="index.html" aria-label="Cuddlesmith Home">
                            <img src="images/Logo.png" alt="Cuddlesmith logo">
                        </a>
                    </div>
                    <button class="hamburger-menu" onclick="openmenu()" aria-label="Open navigation menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="menu-overlay" id="menu-overlay" onclick="closemenu()"></div>
                    <ul id="sidemenu">
                        <li><a href="index.html" onclick="closemenu()">Home</a></li>
                        <li><a href="inverted-fire.html#about" onclick="closemenu()">About</a></li>
                        <li><a href="inverted-fire.html#agnis" onclick="closemenu()">Agnis</a></li>
                        <li><a href="inverted-fire.html#details" onclick="closemenu()">Details</a></li>
                        <li><a href="inverted-fire.html#contact" onclick="closemenu()">Contact</a></li>
                        <button class="close-menu" onclick="closemenu()" aria-label="Close navigation menu">
                            <i class="fas fa-times"></i>
                        </button>
                    </ul>
                </div>
            </nav>
        </div>
        
        <!-- ------------about----------- -->
        <div id="about">
            <div class="container">
                <div style="text-align: center;">
                    <h1 class="sub-title">Inverted Fire Cuddles</h1>
                    <p class="about-tagline">A unique, playful, and transformative group cuddle experience inspired by the element of fire.</p>
                    <p>Explore new ways of connecting, releasing, and igniting joy through creative touch and movement. Inverted Fire Cuddles blend structured cuddle practices with dynamic, playful elements that invite you to move, express, and connect in ways that feel both safe and liberating. This experience is designed for those ready to explore touch and connection with more energy, creativity, and spontaneity while maintaining clear boundaries and consent.</p>
                </div>
            </div>
        </div>

        <!-- ------------agnis----------- -->
        <div id="agnis">
            <div class="container">
                <h1 class="sub-title" style="text-align: center;">AGNIS</h1>
                <p class="about-tagline" style="text-align: center; font-size: 1.1em; margin-top: 10px;">
                    <strong>A</strong>mphibious <strong>G</strong>eodesic <strong>N</strong>exus and <strong>I</strong>gnited <strong>S</strong>pace
                </p>
                <div class="agnis-carousel-wrapper">
                    <button class="carousel-btn carousel-btn-prev" onclick="moveAgnisCarousel(-1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="agnis-carousel">
                        <div class="agnis-track" id="agnis-track">
                            <div class="agnis-media-box">
                                <img src="images/Fire-Amphibious.jpg" alt="Fire Amphibious">
                            </div>
                            <div class="agnis-media-box">
                                <video playsinline muted loop autoplay id="fire-effect-video">
                                    <source src="images/Fire-Effect-trimmed.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            <div class="agnis-media-box">
                                <img src="images/Fire-undershot.jpg" alt="Fire Undershot">
                            </div>
                        </div>
                    </div>
                    <button class="carousel-btn carousel-btn-next" onclick="moveAgnisCarousel(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="carousel-dots" id="agnis-dots">
                    <!-- Dots will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- -------------portfolio------ -->
        <div id="portfolio">
            <div class="container">
                <h1 class="sub-title">Upcoming Events</h1>
                <div class="work-list featured">
                    <div class="work">
                        <img id="randomCommunityImage" src="images/Fire.png">
                        <div class="layer">
                            <h3>Community Cuddle</h3>
                            <p id="event-container"></p>
                            <p id="time-container"></p>
                            <p>Private residence</p>
                            <div class="info-icon" onclick="window.location.href='inverted-fire.html'">
                                <i class="fa-solid fa-circle-info"></i>
                            </div>
                            <div class="info-icon" onclick="window.location.href='Events/HolidayCommunityCuddle.pdf'" style="margin-top: 10px;">
                                <i class="fa-solid fa-file-pdf"></i>
                            </div>
                            <a href="mailto:info@cuddlesmith.com?subject=RSVP%20for%20Community%20Cuddle" class="btn" style="margin-top: 15px; display: inline-block;">RSVP</a>
                        </div>
                    </div>
                </div>
                <a href="index.html#embedded-calendar" class="btn">See Calendar</a>
            </div>
        </div>

        <!-- -----------Details---------- -->
        <div id="details">
            <div class="container">
                <h1 class="sub-title">Details</h1>
                <div class="services-list">
                    <div>
                        <i class="fa-solid fa-fire"></i>
                        <h2>Experience Type</h2>
                        <p>Dynamic group experience combining structured cuddling with movement and play</p>
                    </div>
                    <div>
                        <i class="fa-solid fa-dollar-sign"></i>
                        <h2>Pricing</h2>
                        <ul>
                            <li>$50-$70 per person per session</li>
                            <li>Sliding scale available</li>
                        </ul>
                    </div>
                    <div>
                        <i class="fa-solid fa-location-dot"></i>
                        <h2>Location</h2>
                        <p>Held in a spacious venue that allows for movement. Location details provided upon registration.</p>
                    </div>
                    <div>
                        <i class="fa-solid fa-clock"></i>
                        <h2>Duration</h2>
                        <p>Sessions typically last 3-4 hours, including warm-up, main experience, and integration</p>
                    </div>
                    <div>
                        <i class="fa-solid fa-calendar-check"></i>
                        <h2>Scheduling</h2>
                        <p>Periodic special events. Check the calendar for upcoming dates or contact to inquire about scheduling.</p>
                    </div>
                    <div>
                        <i class="fa-solid fa-shield-halved"></i>
                        <h2>Guidelines</h2>
                        <ul>
                            <li>All participants must agree to group guidelines and code of conduct</li>
                            <li>Consent is required for all interactions</li>
                            <li>You can participate at whatever level feels comfortable</li>
                            <li>Previous experience with group cuddles recommended but not required</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- -----------Contact----------     -->
        <div id="contact">
            <div class="container">
                <div class="row">
                    <div class="contact-left">
                        <h1 class="sub-title">Contact</h1>
                        <p><i class="fa-solid fa-paper-plane"></i> info@cuddlesmith.com</p>
                        <p><i class="fa-solid fa-phone"></i> 206-414-8134</p>
                    </div>
                    <div class="contact-right">
                        <form name="submit-to-google-sheet">
                            <input type="text" name="Name" placeholder="Your Name" required>
                            <input type="email" name="Email" placeholder="Your Email" required>
                            <input type="tel" name="Phone" placeholder="Your Phone">
                            <input type="text" name="Subscribe" placeholder="Subscribe to our mailing list?">
                            <textarea name="Message" rows="6" placeholder="Your Message"></textarea>
                            <button type="submit" class="btn btn2">Submit</button>
                        </form>
                        <span id="msg"></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="copyright">
            <p>Copyright Cuddlesmith. Made with <i class="fa-solid fa-heart"></i></p>
        </div>

        <script>
            var sidemenu = document.getElementById('sidemenu');
            var overlay = document.getElementById('menu-overlay');
            
            function openmenu(){
                sidemenu.classList.add('active');
                overlay.classList.add('active');
            }
            function closemenu(){
                sidemenu.classList.remove('active');
                overlay.classList.remove('active');
            }
        </script>
        <script>
            const scriptURL = 'https://script.google.com/macros/s/AKfycbw6y3Qxi2D9P10MSsStIpOe4T0bXo8Ghwoinmemi216l117w9Cj_VgobvtH8Ie3Tb8/exec';
            const form = document.forms['submit-to-google-sheet'];
            const msg = document.getElementById("msg");
            const submitButton = document.querySelector('.btn2');

            form.addEventListener('submit', e => {
                e.preventDefault();
                
                submitButton.innerHTML = "Submitting...";
                submitButton.disabled = true;

                fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                    .then(response => {
                        msg.innerHTML = "Message sent successfully. We'll be getting back to you shortly! <br>Add info@cuddlesmith.com to your contact list. Sometimes your email services thinks we're spam!";
                        setTimeout(function() {
                            msg.innerHTML = "";
                        }, 10000);

                        form.reset();
                        submitButton.innerHTML = "Submit";
                        submitButton.disabled = false;
                    })
                    .catch(error => {
                        console.error('Error!', error.message);
                        msg.innerHTML = "Error sending message. Please try again.";
                        
                        submitButton.innerHTML = "Submit";
                        submitButton.disabled = false;
                    });
            });
        </script>
        <script>
            // Agnis carousel functionality
            (function() {
                'use strict';
                
                let currentAgnisIndex = 0;
                let isAgnisAnimating = false;
                
                const agnisTrack = document.getElementById('agnis-track');
                const agnisCarousel = document.querySelector('.agnis-carousel');
                const agnisMedia = document.querySelectorAll('.agnis-media-box');
                const totalAgnisItems = agnisMedia.length;
            
                function getAgnisItemWidth() {
                    if (!agnisCarousel) return 0;
                    return agnisCarousel.offsetWidth;
                }
                
                function updateAgnisCarousel() {
                    if (!agnisTrack || !agnisCarousel) return;
                    
                    const itemWidth = getAgnisItemWidth();
                    const translateX = -currentAgnisIndex * itemWidth;
                    
                    agnisTrack.style.transition = 'transform 0.5s ease';
                    agnisTrack.style.transform = `translateX(${translateX}px)`;
                    
                    // Update dots
                    const dots = document.querySelectorAll('#agnis-dots .dot');
                    dots.forEach((dot, index) => {
                        dot.classList.toggle('active', index === currentAgnisIndex);
                    });
                    
                    // Control video playback - video is at index 1 (second item)
                    const video = document.getElementById('fire-effect-video');
                    if (video) {
                        if (currentAgnisIndex === 1) {
                            // Video slide is active - play video
                            video.play().catch(e => console.log('Video autoplay prevented:', e));
                        } else {
                            // Video slide is not active - pause video
                            video.pause();
                            video.currentTime = 0; // Reset to beginning
                        }
                    }
                }
            
                window.moveAgnisCarousel = function(direction) {
                    if (isAgnisAnimating) return;
                    isAgnisAnimating = true;
                    
                    currentAgnisIndex += direction;
                    
                    // Loop around
                    if (currentAgnisIndex < 0) {
                        currentAgnisIndex = totalAgnisItems - 1;
                    } else if (currentAgnisIndex >= totalAgnisItems) {
                        currentAgnisIndex = 0;
                    }
                    
                    updateAgnisCarousel();
                    
                    setTimeout(() => {
                        isAgnisAnimating = false;
                    }, 500);
                };
                
                function initAgnisDots() {
                    const dotsContainer = document.getElementById('agnis-dots');
                    if (!dotsContainer) return;
                    
                    dotsContainer.innerHTML = '';
                    
                    for (let i = 0; i < totalAgnisItems; i++) {
                        const dot = document.createElement('span');
                        dot.className = 'dot' + (i === 0 ? ' active' : '');
                        dot.addEventListener('click', () => {
                            if (isAgnisAnimating) return;
                            isAgnisAnimating = true;
                            currentAgnisIndex = i;
                            updateAgnisCarousel();
                            setTimeout(() => {
                                isAgnisAnimating = false;
                            }, 500);
                        });
                        dotsContainer.appendChild(dot);
                    }
                }
                
                function initAgnisCarousel() {
                    setTimeout(() => {
                        initAgnisDots();
                        updateAgnisCarousel();
                        // If video slide is initially visible, start playing
                        if (currentAgnisIndex === 1) {
                            const video = document.getElementById('fire-effect-video');
                            if (video) {
                                video.play().catch(e => console.log('Video autoplay prevented:', e));
                            }
                        }
                    }, 100);
                }
            
                window.addEventListener('resize', () => {
                    updateAgnisCarousel();
                });
            
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', initAgnisCarousel);
                } else {
                    initAgnisCarousel();
                }
            })();
        </script>
        <script src="config.js"></script>
        <script>
        async function fetchRecurringEventDates() {
            const calendarId = CONFIG.calendarId; 
            const apiKey = CONFIG.googleCalendarApiKey;
            const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?key=${apiKey}&singleEvents=true&orderBy=startTime`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                const now = new Date();
                const eventName = "community cuddle"; // Filter events by this title (case-insensitive)
                const events = data.items
                    .filter(event => (event.summary || '').toLowerCase().includes(eventName) && new Date(event.start.dateTime || event.start.date) > now)
                    .sort((a,b) => new Date(a.start.dateTime || a.start.date) - new Date(b.start.dateTime || b.start.date));

                if (!events.length) {
                    const eventContainer = document.getElementById('event-container');
                    const timeContainer = document.getElementById('time-container');
                    if (eventContainer) eventContainer.innerText = "No upcoming events";
                    if (timeContainer) timeContainer.innerText = "";
                    return;
                }

                const first = events[0];
                const rawStart = first.start?.dateTime || first.start?.date;
                const rawEnd = first.end?.dateTime || first.end?.date;

                // Date
                const startDateObj = new Date(rawStart);
                const dateString = startDateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });

                // Time
                let timeString = "";
                if (!first.start?.dateTime || !first.end?.dateTime) {
                    timeString = "All day";
                } else {
                    const startObj = new Date(first.start.dateTime);
                    const endObj = new Date(first.end.dateTime);

                    const formatTime = (d) => d.toLocaleTimeString('en-US', {
                        hour: 'numeric',
                        minute: '2-digit',
                        hour12: true
                    });

                    timeString = `${formatTime(startObj)} â€“ ${formatTime(endObj)}`;
                }

                // Display the strings in the HTML page (only the next event)
                const eventContainer = document.getElementById('event-container');
                const timeContainer = document.getElementById('time-container');
                if (eventContainer) eventContainer.innerText = dateString;
                if (timeContainer) timeContainer.innerText = timeString;

            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        // Fetch events when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', fetchRecurringEventDates);
        } else {
            fetchRecurringEventDates();
        }
        </script>
    </body>
</html>

